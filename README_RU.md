[![English](https://img.shields.io/badge/lang-en-lightgrey.svg)](README.md)
[![–†—É—Å—Å–∫–∏–π](https://img.shields.io/badge/lang-ru-blue.svg)](README_ru.md)
# Weather Bot ü§ñüå¶

–¢–µ–ª–µ–≥—Ä–∞–º‚Äë–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –ø–æ–≥–æ–¥—É –¥–ª—è –ª—é–±–æ–≥–æ –≥–æ—Ä–æ–¥–∞, –∏—Å–ø–æ–ª—å–∑—É—è **API –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥—ã**. –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞
[aiogram¬†3.20.0post0](https://docs.aiogram.dev/ru/) –∏ —Å–ª—É–∂–∏—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å
–Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏, —Å—Ü–µ–Ω–∞–º–∏ FSM, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| ‚úîÔ∏è | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----|------------|
| `/weather <–≥–æ—Ä–æ–¥>` | –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞: —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –≤–µ—Ç–µ—Ä, –¥–∞–≤–ª–µ–Ω–∏–µ |
| `/start`, `/help` | –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã‚Äë–ø–æ–¥—Å–∫–∞–∑–∫–∏ |
| –†–µ–∑–µ—Ä–≤–Ω—ã–π –≥–µ–æ–∫–æ–¥–µ—Ä | –°–Ω–∞—á–∞–ª–∞ **–Ø–Ω–¥–µ–∫—Å –ì–µ–æ–∫–æ–¥–µ—Ä**, –ø—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî **OSM Nominatim** |
| –≠–º–æ–¥–∑–∏ –∏ —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç | –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–π –≤—ã–≤–æ–¥ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ emoji |
| Async HTTP | –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ **aiohttp** |
| –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–¥ | –ü—Ä–æ—â–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å |

---

## üõ† –°—Ç–µ–∫

* Python¬†‚â•3.10 (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ 3.10¬†‚Äì¬†3.12)
* aiogram¬†3.20.0post0
* aiohttp –¥–ª—è HTTP
* python‚Äëdotenv –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1) –ö–ª–æ–Ω–∏—Ä—É–µ–º –∏ –∑–∞—Ö–æ–¥–∏–º
$ git clone https://github.com/your‚Äëusername/weather_bot.git
$ cd weather_bot

# 2) –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
$ python -m venv .venv
$ source .venv/bin/activate   # Windows: .venv/Scripts/activate

# 3) –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
$ pip install -r requirements.txt

# 4) –°–æ–∑–¥–∞—ë–º .env –∏ –≤–Ω–æ—Å–∏–º –∫–ª—é—á–∏
$ cp .env.example .env
# ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω Telegram –∏ –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥—ã

# 5) –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
$ python main.py
```

---

## üîë –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ | –ü—Ä–∏–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|-------------|--------|------------|
| `TOKEN_TG` | ‚úÖ | `123456:ABC-DEF‚Ä¶` | –¢–æ–∫–µ–Ω –∏–∑ @BotFather |
| `YANDEX_API_KEY` | ‚úÖ | `y0_AQAAA‚Ä¶` | –ö–ª—é—á API –Ø–Ω–¥–µ–∫—Å.–ü–æ–≥–æ–¥—ã |
| `YANDEX_GEOCODER_KEY` | ‚ùå | `12345-geo‚Ä¶` | –ö–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä–∞ (–ø–ª–∞—Ç–Ω—ã–π) |
| `NOMINATIM_USER_AGENT` | ‚ùå | `weather-bot` | UA‚Äë—Å—Ç—Ä–æ–∫–∞ –¥–ª—è Nominatim‚Äëfallback |

–ï—Å–ª–∏ `YANDEX_GEOCODER_KEY` –Ω–µ –∑–∞–¥–∞–Ω, –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ OSM.

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
weather_bot/
‚îú‚îÄ‚îÄ main.py              # –≤—Ö–æ–¥ –∏ —Ü–∏–∫–ª polling
‚îú‚îÄ‚îÄ config.py            # –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ handlers/            # —Ä–æ—É—Ç–µ—Ä—ã –ø–æ —Ñ–∏—á–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ common.py        # /start, /help
‚îÇ   ‚îî‚îÄ‚îÄ weather.py       # /weather
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ services.py      # –≥–µ–æ–∫–æ–¥–µ—Ä + –ø–æ–≥–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ formatters.py    # —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –≤—ã–≤–æ–¥
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üìü –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
/weather –ú–æ—Å–∫–≤–∞
/weather Berlin
```

–¢–∏–ø–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç:
```
üå§ –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–∞:
–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 15 ¬∞C (–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ 13 ¬∞C)
–°–æ—Å—Ç–æ—è–Ω–∏–µ: –º–∞–ª–æ–æ–±–ª–∞—á–Ω–æ
–í–ª–∞–∂–Ω–æ—Å—Ç—å: 60 %
–í–µ—Ç–µ—Ä: 3 –º/—Å
–î–∞–≤–ª–µ–Ω–∏–µ: 760 –º–º —Ä—Ç. —Å—Ç.
```

---

## üê≥ Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```dockerfile
FROM python:3.12-slim
WORKDIR /app
COPY . .
RUN pip install --no-cache-dir -r requirements.txt
CMD ["python", "main.py"]
```

–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
docker build -t weather-bot .
docker run -d --env-file .env --name weather_bot weather-bot
```

---

## ‚öôÔ∏è –°–æ–≤–µ—Ç—ã –ø–æ –¥–µ–ø–ª–æ—é

* **systemd** ‚Äî —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ –Ω–∞ –æ–¥–Ω–æ–º VPS.
* **Supervisor / PM2** ‚Äî –µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ.
* **Heroku / Fly.io / Railway** ‚Äî –¥–æ–±–∞–≤—å—Ç–µ `Procfile` —Å `worker: python main.py`.

---

## üêû –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| `HTTP 403` –æ—Ç –≥–µ–æ–∫–æ–¥–µ—Ä–∞ | –£–¥–∞–ª–∏—Ç–µ `YANDEX_GEOCODER_KEY`, —á—Ç–æ–±—ã —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å OSM, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á |
| ¬´–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–≥–æ–¥—É¬ª | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `YANDEX_API_KEY` –∏ –ª–∏–º–∏—Ç—ã API |
| –ö—Ä—è–∫–æ–∑—è–±—Ä—ã –≤ –≤—ã–≤–æ–¥–µ | –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å `PYTHONIOENCODING=utf-8` |

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ.

---

## üôå –í–∫–ª–∞–¥

PR‚ÄØ‚Äë—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è! –ü–µ—Ä–µ–¥ –∫—Ä—É–ø–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ issue –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è.
